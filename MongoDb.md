1. 什么是MongoDB？

   MongoDB 是一个文档数据库，提供好的性能，领先的非关系型数据库。采用BSON 存储文档数据。MongoDB 用 c++编写的，流行的开源数据库 MySQL 也是用 C++开发的。

2.  MongoDB 的优势有哪些?

   面向文档的存储：以  JSON  格式的文档保存数据。 
   任何属性都可以建立索引。 
   复制以及高可扩展性。 
   自动分片。 
   丰富的查询功能。 
   快速的即时更新。 

3. 什么是集合？  什么是文档？ 

   **集合**就是一组  MongoDB  文档。它相当于关系型数据库（RDBMS）中的**表**这种
   概念。集合位于单独的一个数据库中。一个集合内的多个文档可以有多个不同的
   字段。一般来说，集合中的文档都有着相同或相关的目的。 

   **文档**由一组 key value 组成。文档是动态模式,这意味着同一集合里的文档不需要
   有相同的字段和结构。在关系型数据库中**table中的每一条记录**相当于MongoDB
   中的一个文档。

4. 什么是“mongod”？“mongod”参数有什么? 什么是“mongo”？ 

   mongod 是处理 MongoDB 系统的主要进程。它处理数据请求，管理数据存储，和执行后台管理操作。当我们运行 mongod 命令意味着正在启动 MongoDB 进程,并且在后台运行。 

   mongod 参数: 传递数据库存储路径，默认是"/data/db"  端口号  默认是  "27017" .

   mongo: 它是一个命令行工具用于连接一个特定的mongod 实例。当我们没有带参数运
   行 mongo 命令它将使用默认的端口号和 localhost 连接。

5. 什么是非关系型数据库？

   关系型数据库是对不同于传统关系型数据库的统称。**非关系型数据库的显著特点是不使用 SQL 作为查询语言，数据存储不需要特定的表格模式**。由于简单的设计和非常好的性能所以被用于大数据和Web Apps 等 .

6. 非关系型数据库有哪些类型？ 

   **Key-Value  存储  Eg:Amazon S3**
   **图表  Eg:Neo4J** 
   **文档存储  Eg:MongoDB** 
   **基于列存储  Eg:Cassandra**

7. 为什么用MOngoDB？在哪些场景使用MongoDB？ 

   使用Mongo:

   1) 架构简单 、没有复杂的连接 、深度查询能力,MongoDB 支持动态查询。 
   2）容易调试 、容易扩展 、不需要转化/映射应用对象到数据库对象 、使用内部内存作为存储工作区,以便更快的存取数据。 

   应用场景：

   大数据 、内容管理系统 、移动端 Apps 、数据管理 

8.  MongoDB 中的分片是什么意思？

   分片是**将数据水平切分到不同的物理节点**。当应用数据越来越大的时候，数据量也会越来越大。当数据量增长时，单台机器有可能无法存储数据或可接受的读取写入吞吐量。利用分片技术可以添加更多的机器来应对数据量增加以及读写操作的要求。 

9. **NoSQL 数据库是什么意思?NoSQL 与RDBMS直接有什么区别?为什么要使用和不使用NoSQL 数据库?说一说NoSQL 数据库的几个优点?**

   a. NoSQL 是非关系型数据库，NoSQL = Not Only SQL。 
   b. 关系型数据库采用的**结构化的数据**，NoSQL 采用的是**键值对的方式存储数据**。 
   c. **在处理非结构化/半结构化的大数据时；在水平方向上进行扩展时；随时应对动态增加的数据项时可以优先考虑使用NoSQL 数据库。** 
   d. 在考虑数据库的成熟度、技术支持、分析和商业智能、管理及专业性等问题时，应优先考虑关系型数据库。 

10. **MySQL 与MongoDB之间最基本的差别是什么?** 

    MySQL 和MongoDB 两者都是免费开源的数据库。MySQL 和MongoDB 有许多基本差别包括数据的表示(data representation)，查询，关系，事务，schema 的设计和定义，标准化(normalization)，速度和性能。 
    通过比较MySQL 和MongoDB，实际上我们是在比较关系型和非关系型数据库，即数据存储结构不同。

11.  MongoDB成为最好NoSQL 数据库的原因是什么? 

    面向文件的 、高性能 、 高可用性 、易扩展性 、丰富的查询语言 .

12. 名字空间(namespace)是什么?

    MongoDB 存储BSON对象在集合(collection)中。数据库名字和丛集名字以句点连结起来叫做名字空间(namespace)。 

13. 如果用户移除对象的属性，该属性是否从存储层中删除? 

    是的，用户移除属性然后对象会重新保存(re-save())。

14. 允许空值 null吗？

    对于对象成员而言，是的。然而用户不能够添加空值(null)到数据库集合(collection)，因为空值不是对象。然而用户能够添加空对象{}。

15. 更新操作立刻fsync到磁盘?

    不会，**磁盘写操作默认是延迟执行的**。写操作可能在两三秒(默认在 60 秒内)后到达磁盘。例如，如果一秒内数据库收到一千个对一个对象递增的操作，仅刷新磁盘一次。(注意，尽管fsync 选项在命令行和经过getLastError_old是有效的)(译者：也许是坑人的面试题??)。 

16. 如何执行事务/加锁? 

    **MongoDB 没有使用传统的锁或者复杂的带回滚的事务**，因为它设计的**宗旨是轻量**，快速以及可预计的高性能。可以把它类比成MySQL MylSAM 的自动提交模式。通过精简对事务的支持，性能得到了提升，特别是在一个可能会穿过多个服务器的系统里。 

17. 为什么我的数据文件如此庞大? 

    MongoDB 会积极的预分配预留空间来防止文件系统碎片。 

18. 什么是 master 或primary? 
    它是当前备份集群(replica set)中负责**处理所有写入操作的主要节点/成员**。在一个备份集群中，当失效备援(failover)事件发生时，一个另外的成员会变成 primary。 

19. 我必须调用getLastError来确保写操作生效了么? 

    不用。不管你有没有调用getLastError(又叫"Safe Mode")服务器做的操作都一样。调用getLastError只是为了确认写操作成功提交了。当然，你经常想得到确认，但是写操作的安全性和是否生效不是由这个决定的。 

20. 我应该启动一个集群分片(sharded)还是一个非集群分片的 MongoDB 环境? 

    为开发便捷起见，我们**建议以非集群分片(unsharded)方式开始一个 MongoDB 环境**，除非一台服务器不足以存放你的初始数据集。从非集群分片升级到集群分片(sharding)是无缝的，所以在你的数据集还不很大的时候没必要考虑集群分片(sharding)。

21. **分片(sharding)和复制(replication)是怎样工作的?** 

    **每一个分片(shard)是一个分区数据的逻辑集合**。分片可能由单一服务器或者集群组成，我们推荐为每一个分片(shard)使用集群。 

22.  数据在什么时候才会扩展到多个分片(shard)里? 

    MongoDB 分片是基于区域(range)的。所以**一个集合(collection)中的所有的对象都被存放到一个块(chunk)中**。<u>只有当存在多余一个块的时候，才会有多个分片获取数据的选项</u>。现在，每个默认块的大小是  64Mb，所以你需要至少  64 Mb 空间才可以实施一个迁移。 

23. 当我试图更新一个正在被迁移的块(chunk)上的文档时会发生什么? 

    更新操作会立即发生在旧的分片(shard)上，然后更改才会在<u>所有权转移</u>(ownership transfers)前复制到新的分片上。

24.  如果在一个分片(shard)停止或者很慢的时候，我发起一个查询会怎样? 

    如果一个分片(shard)停止了，除非查询设置了“Partial”选项，否则**查询会返回一个错误**。**如果一个分片(shard)响应很慢，MongoDB 则会等待它的响应**。 

25. <u>可以把 moveChunk 目录里的旧文件删除吗</u>?

    没问题，这些文件是在分片(shard)进行均衡操作(balancing)的时候产生的临时文件。一旦这些操作已经完成，相关的临时文件也应该被删除掉。但目前清理工作是需要手动的，所以请小心地考虑再释放这些文件的空间。 

26.  如果块移动操作(moveChunk)失败了，我需要手动清除部分转移的文档吗? 

    不需要，移动操作是一致(consistent)并且是确定性的(deterministic);一次失败后，移动操作会不断重试;当完成后，数据只会出现在新的分片里(shard)。 

27. MongoDB在A:{B,C}上建立索引，查询A:{B,C}和A:{C,B}都会使用索引吗？ 

    不会，只会在A:{B,C}上使用索引。 

28. . MongoDB支持存储过程吗？如果支持的话，怎么用？

    ongoDB 支持存储过程，它是 javascript 写的，保存在db.system.js表中。 

29. 如何理解MongoDB中的GridFS机制，MongoDB为何使用GridFS来存储文件？

    **GridFS是一种将大型文件存储在MongoDB 中的文件规范**。使用GridFS 可以将大文件分隔成多个小文档存放，这样我们能够有效的保存大文档，而且解决了BSON对象有限制的问题。 

